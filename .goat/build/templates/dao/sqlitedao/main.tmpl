{{- $ctx := . -}}

{{- /* Module */ -}}
{{- $modulePath := (print $ctx.To "/module.go") -}}
{{- if not ($ctx.Filesystem.IsFile $modulePath) -}}
  {{- $ctx.Out.File $modulePath -}}
    {{- template "module" $ctx -}}
  {{- $ctx.Out.EOF -}}
{{- end -}}

{{- /* Helpers */ -}}
{{- $helpersPath := (print $ctx.To "/helpers/main.go") -}}
{{- if not ($ctx.Filesystem.IsFile $helpersPath) -}}
  {{- $ctx.Out.File $helpersPath -}}
    {{- template "helpers" $ctx -}}
  {{- $ctx.Out.EOF -}}
{{- end -}}

{{- range $index, $key := (keys .Data "model.") -}}

  {{- /* CreateTable */ -}}
  {{- $createtablePath := (print $ctx.To "/dao/" $key "/createtable.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $createtablePath) -}}
    {{- $ctx.Out.File $createtablePath -}}
      {{- template "dao.createtable" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

  {{/* Delete */}}
  {{- $deletePath := (print $ctx.To "/dao/" $key "/delete.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $deletePath) -}}
    {{- $ctx.Out.File $deletePath -}}
      {{- template "dao.delete" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

  {{- /* Drop table */ -}}
  {{- $dropTablePath := (print $ctx.To "/dao/" $key "/droptable.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $dropTablePath) -}}
    {{- $ctx.Out.File $dropTablePath -}}
      {{- template "dao.droptable" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

  {{- /* Find all */ -}}
  {{- $findAllPath := (print $ctx.To "/dao/" $key "/findall.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $findAllPath) -}}
    {{- $ctx.Out.File $findAllPath -}}
      {{- template "dao.findall" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

  {{- /* Find by id */ -}}
  {{- $findByIdPath := (print $ctx.To "/dao/" $key "/findbyid.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $findByIdPath) -}}
    {{- $ctx.Out.File $findByIdPath -}}
      {{- template "dao.findbyid" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

  {{- /* Insert */ -}}
  {{- $insertPath := (print $ctx.To "/dao/" $key "/insert.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $insertPath) -}}
    {{- $ctx.Out.File $insertPath -}}
      {{- template "dao.insert" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

  {{- /* Update */ -}}
  {{- $updatePath := (print $ctx.To "/dao/" $key "/update.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $updatePath) -}}
    {{- $ctx.Out.File $updatePath -}}
      {{- template "dao.update" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

  {{- /* Module */ -}}
  {{- $modulePath := (print $ctx.To "/dao/" $key "/module.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $modulePath) -}}
    {{- $ctx.Out.File $modulePath -}}
      {{- template "dao.module" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

  {{/* Main test */}}
  {{- $mainTestPath := (print $ctx.To "/dao/" $key "/main_test.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $mainTestPath) -}}
    {{- $ctx.Out.File $mainTestPath -}}
      {{- template "dao.main_test" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

  {{/* CreateTable story test */}}
  {{- $testCreateTablePath := (print $ctx.To "/dao/" $key "/createtable_story_test.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $testCreateTablePath) -}}
    {{- $ctx.Out.File $testCreateTablePath -}}
      {{- template "dao.createtable_story_test" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

  {{/* DropTable story test */}}
  {{- $testDropTablePath := (print $ctx.To "/dao/" $key "/droptable_story_test.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $testDropTablePath) -}}
    {{- $ctx.Out.File $testDropTablePath -}}
      {{- template "dao.droptable_story_test" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

  {{/* Delete story test */}}
  {{- $testCreateTablePath := (print $ctx.To "/dao/" $key "/delete_story_test.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $testCreateTablePath) -}}
    {{- $ctx.Out.File $testCreateTablePath -}}
      {{- template "dao.delete_story_test" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

  {{/* insert story test */}}
  {{- $testInsertPath := (print $ctx.To "/dao/" $key "/insert_story_test.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $testInsertPath) -}}
    {{- $ctx.Out.File $testInsertPath -}}
      {{- template "dao.insert_story_test" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

  {{/* find all story test */}}
  {{- $testFindAllPath := (print $ctx.To "/dao/" $key "/findall_story_test.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $testFindAllPath) -}}
    {{- $ctx.Out.File $testFindAllPath -}}
      {{- template "dao.findall_story_test" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

  {{/* find by id story test */}}
  {{- $testFindByIDPath := (print $ctx.To "/dao/" $key "/findbyid_story_test.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $testFindByIDPath) -}}
    {{- $ctx.Out.File $testFindByIDPath -}}
      {{- template "dao.findbyid_story_test" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

  {{/* update story test */}}
  {{- $testUpdatePath := (print $ctx.To "/dao/" $key "/update_story_test.go") -}}
  {{- if not ($ctx.Filesystem.IsFile $testUpdatePath) -}}
    {{- $ctx.Out.File $testUpdatePath -}}
      {{- template "dao.update_story_test" (ctx $ctx (print "model." $key) "") -}}
    {{- $ctx.Out.EOF -}}
  {{- end -}}

{{- end -}}
